<?xml version="1.0"?>
<!--
  This is not a standalone urdf for servicebot. It simply defines the 'servicebot' tag that can
  be incorporated by other urdf files (e.g. turtlebot).

  See servicebot_standalone.urdf.xacro for a standalone urdf to be tested with
      servicebot_description/launch/view_model.launch
 -->
<robot name="servicebot" xmlns:xacro="http://www.ros.org/wiki/xacro">
  <xacro:include filename="$(find service_description)/urdf/xacros/common_properties.urdf.xacro" />
  <xacro:include filename="$(find service_description)/urdf/xacros/servicebot_gazebo.urdf.xacro" />
  <!-- Depth camera -->
  <xacro:include filename="$(find service_description)/urdf/xacros/depth_camera.xacro" />
  <!-- IMU -->
  <xacro:include filename="$(find service_description)/urdf/xacros/imu.xacro" />

  <xacro:property name="width" value="0.2" />


  <!-- xacro material property -->
  <!-- servicebot -->
  <xacro:macro name="servicebot">
    <link name="base_footprint" />


    <!--
       Base link is set at the bottom of the base mould.
       This is done to be compatible with the way base link
       was configured for turtlebot 1. Refer to

       https://github.com/turtlebot/turtlebot/issues/40

       To put the base link at the more oft used wheel
       axis, set the z-distance from the base_footprint
       to 0.352.
      -->
    <joint name="base_joint" type="fixed">
      <origin xyz="0 0 0.0302" rpy="0 0 0" />
      <parent link="base_footprint" />
      <child link="base_link" />
    </joint>
    <link name="base_link">
      <visual>
        <geometry>
          <!-- new mesh -->
          <mesh filename="package://service_description/meshes/servis/sase2.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <material name="silver">
          <color rgba="0.8 0.8 0.8 1.0" />
        </material>
        <origin xyz="-0.254 0.237  -0.281" rpy="0 0 -${pi/2}" />
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/sase2.STL" scale="0.001 0.001 0.001" />
          <!-- <cylinder length="0.16" radius="0.26" /> -->
        </geometry>
        <origin xyz="-0.254 0.237  -0.281" rpy="0 0 -${pi/2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.01 0 0" />
        <mass value="15" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.37" ixy="0.0" ixz="0.0" iyy="0.28" iyz="0.0" izz="0.36" />
      </inertial>
    </link>

    <joint name="pole_suspan1_joint" type="fixed">
      <origin xyz="0.0765 -0.1455  ${0.142+0.0056}" rpy="0 0 0" />
      <parent link="base_link" />
      <child link="suspan_pole1" />
    </joint>
    <link name="suspan_pole1">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/suspansiyon_mili.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.006 -0.006 -0.071" rpy="0 0 0" />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/suspansiyon_mili.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.006 -0.006 -0.071" rpy="0 0 0" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.1455 0.0765 0.141" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <joint name="pole_suspan2_joint" type="fixed">
      <origin xyz="-0.0765 0.1455  ${0.142+0.0056}" rpy="0 0 0" />
      <parent link="base_link" />
      <child link="suspan_pole2" />
    </joint>
    <link name="suspan_pole2">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/suspansiyon_mili.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.006 -0.006 -0.071" rpy="0 0 0" />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/suspansiyon_mili.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.006 -0.006 -0.071" rpy="0 0 0" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="-0.1455 -0.0765  0.141" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <joint name="pole_suspan3_joint" type="fixed">
      <origin xyz="-0.0765 -0.1455 ${0.142+0.0056}" rpy="0 0 0" />
      <parent link="base_link" />
      <child link="suspan_pole3" />
    </joint>
    <link name="suspan_pole3">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/suspansiyon_mili.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.006 -0.006 -0.071" rpy="0 0 0" />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/suspansiyon_mili.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.006 -0.006 -0.071" rpy="0 0 0" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="-0.1455 0.0765 0.141" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <joint name="suspan_pole4_joint" type="fixed">
      <origin xyz="0.0765 0.1455 ${0.142+0.0056}" rpy="0 0 0" />
      <parent link="base_link" />
      <child link="suspan_pole4" />
    </joint>
    <link name="suspan_pole4">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/suspansiyon_mili.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.006 -0.006 -0.071" rpy="0 0 0" />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/suspansiyon_mili.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.006 -0.006 -0.071" rpy="0 0 0" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.1455 -0.0765 0.141" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <!-- Motor baglantı plakası1 -->
    <joint name="motor_baglanti_plaka_joint1" type="fixed">
      <!-- prismatic -->
      <!-- <origin xyz="0.07 -0.0765 0" rpy="1.5707 0 0 " /> -->
      <origin xyz="0.0765 0.0 -0.04" rpy="0 0 ${M_PI_2}" />
      <parent link="suspan_pole2" />
      <child link="motor_baglanti_plaka" />
      <!-- <axis xyz="0 0 1" /> -->
      <!-- <limit lower="-0.01" upper="0.01" effort="100" velocity="0.1" /> -->
    </joint>

    <link name="motor_baglanti_plaka">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/motor_baglanti.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.015  0.176 -0.086" rpy="1.5707 0 0" />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/motor_baglanti.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.015 0.176 -0.086" rpy="1.5707 0 0" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.05375 -0.00689  -0.1" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <!-- Motor baglantı plakası2 -->
    <joint name="motor_baglanti_plaka_joint2" type="fixed">
      <!-- prismatic -->
      <!-- <origin xyz="0.07 -0.0765 0" rpy="1.5707 0 0 " /> -->
      <origin xyz="0.0765 -0.0 -0.04" rpy="0 0 ${M_PI_2}" />
      <parent link="suspan_pole3" />
      <child link="motor_baglanti_plaka2" />
      <!-- <axis xyz="0 0.0 1" /> -->
      <!-- <limit lower="-0.01" upper="0.01" effort="100" velocity="0.1" /> -->

    </joint>

    <link name="motor_baglanti_plaka2">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/motor_baglanti.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="0.015  -0.176 -0.086" rpy="1.5707 0 ${-M_PI}" />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/motor_baglanti.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="0.015 -0.176 -0.086" rpy="1.5707 0 ${M_PI}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.05375 -0.00689  -0.1" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>


    <!-- Motor1 -->
    <joint name="motor_joint1" type="fixed">
      <!-- prismatic -->
      <origin xyz="-0.02 0.0 -0.03" rpy="0 0 ${-M_PI_2}" /> <!-- visual and collision, joint shift -->
      <parent link="motor_baglanti_plaka" />
      <child link="motor1" />
      <axis xyz="1 0 0" />
      <!-- <limit lower="-0.05" upper="0.05" effort="100" velocity="0.1" /> -->

    </joint>
    <link name="motor1">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/motor_kutusu.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="0.03 -0.05 0.03" rpy="0 ${M_PI_2} ${M_PI_2}" />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/motor_kutusu.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="0.03 -0.05 0.03" rpy="0 ${M_PI_2} ${M_PI_2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.05375 -0.00689  -0.1" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <!-- Motor2 -->
    <joint name="motor_joint2" type="fixed">
      <!-- prismatic -->
      <origin xyz="0.02 0.0 -0.03" rpy="0 0 ${-M_PI_2}" /> <!-- visual and collision, joint shift -->
      <parent link="motor_baglanti_plaka2" />
      <child link="motor2" />
      <axis xyz="1 0 0" />
      <!-- <limit lower="-0.05" upper="0.05" effort="100" velocity="0.1" /> -->

    </joint>
    <link name="motor2">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/motor_kutusu.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="0.03 0.05 -0.03" rpy="0 ${-M_PI_2} ${M_PI_2}" />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/motor_kutusu.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="0.03 0.05 -0.03" rpy="0 ${-M_PI_2} ${M_PI_2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.05375 -0.00689  -0.1" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>


    <!-- Reductor mil1 -->
    <joint name="reduktor_mil_joint1" type="fixed">
      <!-- prismatic -->
      <origin xyz="0. 0.058 0.0" rpy="0 0 0" />
      <parent link="motor1" />
      <child link="reduktor_mil1" />
      <!-- <axis xyz="1 0 0" /> -->
      <!-- <limit lower="-0.15" upper="0.15" effort="100" velocity="0.01" /> -->

    </joint>
    <link name="reduktor_mil1">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/reduktor_mili.STL" scale="0.001 0.001 0.002" />
        </geometry>
        <origin xyz="-0.007 0.013 0.007" rpy="0 ${M_PI_2} -${M_PI_2}" />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/reduktor_mili.STL" scale="0.001 0.001 0.002" />
        </geometry>
        <origin xyz="-0.007 0.013 0.007" rpy="0 ${M_PI_2} -${M_PI_2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.05375 -0.00689  -0.1" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <!-- Reductor mil2 -->
    <joint name="reduktor_mil_joint2" type="fixed">
      <origin xyz="0. -0.058 0.0" rpy="0 0 0" />
      <parent link="motor2" />
      <child link="reduktor_mil2" />
      <!-- <axis xyz="1 0 0" /> -->
      <!-- <limit lower="-0.15" upper="0.15" effort="100" velocity="0.01" /> -->

    </joint>
    <link name="reduktor_mil2">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/reduktor_mili.STL" scale="0.001 0.001 0.002" />
        </geometry>
        <origin xyz="-0.007 -0.013 -0.007" rpy="0 ${-M_PI_2} -${M_PI_2}" />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/reduktor_mili.STL" scale="0.001 0.001 0.002" />
        </geometry>
        <origin xyz="-0.007 -0.013 -0.007" rpy="0 ${M_PI_2} -${M_PI_2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.05375 -0.00689  -0.1" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <!-- reduktor1 -->
    <joint name="reduktor_joint1" type="continuous">
      <!-- prismatic -->
      <origin xyz="0. 0.04 0.0" rpy="0 0 0" />
      <parent link="reduktor_mil1" />
      <child link="reduktor1" />
      <axis xyz="0 1 0" />
      <!-- <limit lower="-0.15" upper="0.15" effort="100" velocity="0.01" /> -->

    </joint>
    <link name="reduktor1">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/reduktor.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="0.0735 -0.155 ${0.0725 + 0.0099}" rpy="0 ${M_PI_2} ${M_PI_2}" />
        <xacro:bronze />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/reduktor.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="0.0735 -0.155 ${0.0725 + 0.0099}" rpy="0 ${M_PI_2} ${M_PI_2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.05375 -0.00689  -0.1" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <!-- reduktor2 -->
    <joint name="reduktor_joint2" type="continuous">
      <origin xyz="0.0 -0.04 0.0" rpy="0 0 0" />
      <parent link="reduktor_mil2" />
      <child link="reduktor2" />
      <axis xyz="0 1 0" />
      <!-- <limit lower="-0.15" upper="0.15" effort="100" velocity="0.01" /> -->

    </joint>
    <link name="reduktor2">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/reduktor.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="0.0735 0.155 -${0.0725 + 0.0099}" rpy="0 ${-M_PI_2} ${M_PI_2}" />
        <xacro:bronze />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/reduktor.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="0.0735 0.155 -${0.0725 + 0.0099}" rpy="0 ${-M_PI_2} ${M_PI_2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.05375 -0.00689  -0.1" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <!-- Drive Wheel1 -->
    <joint name="wheel_joint1" type="fixed">
      <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
      <parent link="reduktor1" />
      <child link="wheel1" />
      <!-- <axis xyz="0 1 0" /> -->
      <!-- <limit lower="-0.15" upper="0.15" effort="100" velocity="0.01" /> -->

    </joint>
    <link name="wheel1">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/tahrik_tekeri.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="0.0798 -0.155 ${0.0725 + 0.0099}" rpy="0 ${M_PI_2} ${M_PI_2}" />
        <xacro:green />
      </visual>

      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/tahrik_tekeri.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="0.0798 -0.155 ${0.0725 + 0.0099}" rpy="0 ${M_PI_2} ${M_PI_2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.05375 -0.00689  -0.1" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <!-- Drive Wheel2 -->
    <joint name="wheel_joint2" type="fixed">
      <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
      <parent link="reduktor2" />
      <child link="wheel2" />
      <!-- <axis xyz="0 1 0" /> -->
      <!-- <limit lower="-0.15" upper="0.15" effort="100" velocity="0.01" /> -->

    </joint>
    <link name="wheel2">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/servis/tahrik_tekeri.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="0.0798 0.155 -${0.0725 + 0.0099}" rpy="0 ${-M_PI_2} ${M_PI_2}" />
        <xacro:green />
      </visual>

      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/tahrik_tekeri.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="0.0798 0.155 -${0.0725 + 0.0099}" rpy="0 ${-M_PI_2} ${M_PI_2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.05375 -0.00689  -0.1" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>


    <!-- Chaster wheel chassis1 -->
    <joint name="chaster_wheel_chassis_joint1" type="revolute">
      <origin xyz="-0.198 -0.01 0.047" rpy="0 0 0 " />
      <parent link="base_link" />
      <child link="chaster_wheel_chassis1" />
      <axis xyz="0 0 1" />
      <limit lower="${-M_PI}" upper="${M_PI}" effort="100" velocity="0.1" />
    </joint>
    <link name="chaster_wheel_chassis1">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/sarhos_tabla/sarhos_tabla.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.03 -0.03 -0.035" rpy="${M_PI_2} 0 ${M_PI_2}" />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/sarhos_tabla/sarhos_tabla.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz=" -0.03 -0.03 -0.035" rpy="${M_PI_2} 0 ${M_PI_2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.0 0.0 0.0" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <!-- Chaster wheel chassis2 -->
    <joint name="chaster_wheel_chassis_joint2" type="revolute">
      <origin xyz="0.156 -0.115 0.047" rpy="0 0 0 " />
      <parent link="base_link" />
      <child link="chaster_wheel_chassis2" />
      <axis xyz="0 0 1" />
      <limit lower="${-M_PI}" upper="${M_PI}" effort="100" velocity="0.1" />
    </joint>
    <link name="chaster_wheel_chassis2">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/sarhos_tabla/sarhos_tabla.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.03 -0.03 -0.035" rpy="${M_PI_2} 0 ${M_PI_2}" />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/servis/sarhos_tabla.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.03 -0.03 -0.035" rpy="${M_PI_2} 0 ${M_PI_2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.0 0.0 0.0" />
        <mass value="0.21" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <!-- Chaster wheel chassis3 -->
    <joint name="chaster_wheel_chassis_joint3" type="revolute">
      <origin xyz="0.156 0.115 0.047" rpy="0 0 0 " />
      <parent link="base_link" />
      <child link="chaster_wheel_chassis3" />
      <axis xyz="0 0 1" />
      <limit lower="${-M_PI}" upper="${M_PI}" effort="100" velocity="0.1" />
    </joint>
    <link name="chaster_wheel_chassis3">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/sarhos_tabla/sarhos_tabla.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.03 -0.03 -0.035" rpy="${M_PI_2} 0 ${M_PI_2}" />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/sarhos_tabla/sarhos_tabla.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.03 -0.03 -0.035 " rpy="${M_PI_2} 0 ${M_PI_2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.0 0.0 0.0" />
        <mass value="0.20" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <!-- chaster wheel1 -->
    <joint name="chaster_wheel_joint1" type="continuous">
      <origin xyz="0.025 -0.0 -0.027" rpy="0 0 0 " />
      <parent link="chaster_wheel_chassis1" />
      <child link="chaster_wheel1" />
      <axis xyz="0 1 0" />
      <dynamics damping="0.1" friction="0.1" />

    </joint>
    <link name="chaster_wheel1">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/sarhos_tabla/sarhos_teker.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.025 0.01 -0.025" rpy="0 0 ${-M_PI_2}" />
        <xacro:green />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/sarhos_tabla/sarhos_teker.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.025 0.01 -0.025" rpy="0 0 ${-M_PI_2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.0 0.0 0.0" />
        <mass value="0.20" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <!-- chaster wheel2 -->
    <joint name="chaster_wheel_joint2" type="continuous">
      <origin xyz="0.025 0.0 -0.027" rpy="0 0 0 " />
      <parent link="chaster_wheel_chassis2" />
      <child link="chaster_wheel2" />
      <axis xyz="0 1 0" />
      <dynamics damping="0.1" friction="0.1" />

    </joint>
    <link name="chaster_wheel2">
      <visual>
        <geometry>
          <mesh filename="package://service_description/meshes/sarhos_tabla/sarhos_teker.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.025 0.01 -0.025" rpy="0 0 ${-M_PI_2}" />
        <xacro:green />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <mesh filename="package://service_description/meshes/sarhos_tabla/sarhos_teker.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.025 0.01 -0.025" rpy="0 0 ${-M_PI_2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.0 0.0 0.0" />
        <mass value="0.20" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <!-- chaster wheel3 -->
    <joint name="chaster_wheel_joint3" type="continuous">
      <origin xyz="0.025 0.0 -0.027" rpy="0 0 0 " />
      <parent link="chaster_wheel_chassis3" />
      <child link="chaster_wheel3" />
      <axis xyz=" 0 1 0" />
      <dynamics damping="0.1" friction="0.1" />

    </joint>
    <link name="chaster_wheel3">
      <visual>
        <geometry>
          <!-- <mesh filename="package://service_description/meshes/servis/ust_kaporta.STL" scale="0.001 0.001 0.001" /> -->
          <mesh filename="package://service_description/meshes/sarhos_tabla/sarhos_teker.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.025 0.01 -0.025" rpy="0 0 ${-M_PI_2}" />
        <xacro:green />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <!-- <mesh filename="package://service_description/meshes/servis/ust_kaporta.STL" scale="0.001 0.001 0.001" /> -->
          <mesh filename="package://service_description/meshes/sarhos_tabla/sarhos_teker.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.025 0.01 -0.025" rpy="0 0 ${-M_PI_2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.0 0.0 0.0" />
        <mass value="0.20" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>


    <!-- upper chassis -->
    <joint name="upper_chassis_joint" type="fixed">
      <origin xyz="0.0 0.0 0.25" rpy="0 0 0 " />
      <parent link="base_link" />
      <child link="upper_chassis" />

    </joint>
    <link name="upper_chassis">
      <visual>
        <geometry>
          <!-- <mesh filename="package://service_description/meshes/servis/ust_kaporta.STL" scale="0.001 0.001 0.001" /> -->
          <mesh filename="package://service_description/meshes/servis/ust_sase.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.3 0.32 -0.03" rpy="0 0 -${pi/2}" />
      </visual>
      <collision>
        <geometry>
          <!-- <cylinder length="0.142" radius="0.006" /> -->
          <!-- <mesh filename="package://service_description/meshes/servis/ust_kaporta.STL" scale="0.001 0.001 0.001" /> -->
          <mesh filename="package://service_description/meshes/servis/ust_sase.STL" scale="0.001 0.001 0.001" />
        </geometry>
        <origin xyz="-0.3 0.32 -0.03" rpy="0 0 -${pi/2}" />
      </collision>
      <inertial>
        <!-- COM experimentally determined -->
        <origin xyz="0.0 0.0 0.0" />
        <mass value="0.20" /> <!--  kg for small/big battery pack -->
        <!-- servicebot's inertia tensor is approximated by a cylinder with homogeneous mass distribution
             More details: http://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors
             m = 2.4 kg; h = 0.09 m; r = 0.175 m
             ixx = 1/12 * m * (3 * r^2 + h^2)
             iyy = 1/12 * m * (3 * r^2 + h^2)
             izz = 1/2 * m * r^2
          -->
        <inertia ixx="0.00057724" ixy="0.0" ixz="0.0" iyy="0.00057724" iyz="0.0" izz="0.00000597" />
      </inertial>
    </link>

    <!-- Rplidar-->
    <link name="rplidar_laser_link">
      <visual>
        <origin rpy="0 0 ${2*M_PI_4}" xyz="0 0 0" />
        <geometry>
          <mesh filename="package://service_description/meshes/sensors/rplidar-a2.stl" />
        </geometry>
        <material name="dark_grey">
          <color rgba="0.2 0.2 0.2 1.0" />
        </material>
      </visual>
      <collision>
        <origin rpy="0 0 0" xyz="0 0 0" />
        <geometry>
          <cylinder length="0.01" radius="0.015" />
        </geometry>
      </collision>
      <inertial>
        <origin rpy="0 0 0" xyz="0 0 0" />
        <mass value="0.1" />
        <inertia ixx="6.458333333333333e-06" ixy="0" ixz="0" iyy="6.458333333333333e-06" iyz="0" izz="1.1249999999999999e-05" />

      </inertial>
    </link>

    <joint name="rplidar_laser_joint" type="fixed">
      <parent link="base_link" />
      <child link="rplidar_laser_link" />
      <origin rpy="0 0 -${2*M_PI_4}" xyz="0.18 0.0  0.25" />
    </joint>

    <!-- Depth Camera up-->
    <xacro:depth_camera name="cameraup" parent="upper_chassis">
      <origin xyz="0.228  -0.035   0.921" rpy="0 ${M_PI_4} 0" />
    </xacro:depth_camera>

    <!-- Depth Camera down-->
    <xacro:depth_camera name="cameradown" parent="base_link">
      <origin xyz="0.228 -0.035  0.094" rpy="0 -${M_PI_4} 0" />
    </xacro:depth_camera>

    <!-- imu -->
    <xacro:imu name="imu" parent="base_link">
      <origin xyz=" 0.128 0.00  0.19" rpy="0 0 0" />
    </xacro:imu>


    <!-- gazebo simulation plugin -->
    <xacro:servicebot_sim />
  </xacro:macro>
</robot>